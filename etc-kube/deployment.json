{
	"apiVersion": "extensions/v1beta1",
	"kind": "Deployment",
	"metadata": {
		"name": "corvallisor"
	},
	"spec": {
		"replicas": 1,
		"strategy": {
			"type": "RollingUpdate",
			"rollingUpdate": {
				"maxUnavailable": 0,
				"maxSurge": 1
			}
		},
		"template": {
			"metadata": {
				"labels": {
					"app": "corvallisor",
					"appid": "corvallisor"
				}
			},
			"spec": {
				"containers": [{
					"name": "corvallisor",
					"image": "gcr.io/proudcity-1184/wp-proudcity:kubernetes.11",
					"resources": {
						"requests": {
							"cpu": "10m",
							"memory": "200Mi"
						},
						"limits": {
							"memory": "800Mi"
						}
					},
					"env": [
            {
              "name": "WORDPRESS_DB_HOST",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "dbhost"
                }
              }
            },
            {
              "name": "WORDPRESS_DB_USER",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "dbuser"
                }
              }
            },
            {
              "name": "WORDPRESS_DB_PASSWORD",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "dbpassword"
                }
              }
            },
            {
              "name": "WORDPRESS_DB_NAME",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "dbname"
                }
              }
            },
            {
              "name": "WORDPRESS_DB_PORT",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "dbport"
                }
              }
            },
            {
              "name": "HOST",
              "value": "dev-san-rafael-ca.proudcity.com"
            },
            {
              "name": "TLS",
              "value": "true"
            },
            {
              "name": "WORDPRESS_AUTH_KEY",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "auth-key"
                }
              }
            },
            {
              "name": "WORDPRESS_SECURE_AUTH_KEY",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "secure-auth-key"
                }
              }
            },
            {
              "name": "WORDPRESS_LOGGED_IN_KEY",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "logged-in-key"
                }
              }
            },
            {
              "name": "WORDPRESS_NONCE_KEY",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "nonce-key"
                }
              }
            },
            {
              "name": "WORDPRESS_AUTH_SALT",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "auth-salt"
                }
              }
            },
            {
              "name": "WORDPRESS_SECURE_AUTH_SALT",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "secure-auth-salt"
                }
              }
            },
            {
              "name": "WORDPRESS_LOGGED_IN_SALT",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "logged-in-salt"
                }
              }
            },
            {
              "name": "WORDPRESS_NONCE_SALT",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "corvallisor",
                  "key": "nonce-salt"
                }
              }
            },
            {
              "name": "STATELESS_MEDIA_BUCKET",
              "value": "proudcity"
            },
            {
              "name": "STATELESS_MEDIA_DIRECTORY",
              "value": "corvallisor/uploads/"
            },
            {
              "name": "STATELESS_MEDIA_BUCKET",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "proudcity",
                  "key": "stateless-media-bucket"
                }
              }
            },
            {
              "name": "STATELESS_MEDIA_SERVICE_ACCOUNT",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "proudcity",
                  "key": "stateless-media-account"
                }
              }
            },
            {
              "name": "STATELESS_MEDIA_DIRECTORY",
              "value": "corvallisor"
            },
            {
              "name": "GOOGLE_GIT_TOKEN",
              "valueFrom": {
                "secretKeyRef": {
                  "name": "proudcity",
                  "key": "google-git-token"
                }
              }
            },
            {
              "name": "WORDPRESS_THEMES",
              "value": "https://source.developers.google.com/p/proudcity-1184/r/wp-proud-sr-ca-theme"
            },
            {
              "name": "WORDPRESS_PLUGINS",
              "value": "https://source.developers.google.com/p/proudcity-1184/r/e-signature,https://source.developers.google.com/p/proudcity-1184/r/e-signature-business-add-ons"
            }
          ],
					"imagePullPolicy": "Always",
					"ports": [{
						"containerPort": 80
					}],
					"volumeMounts": [{
						"name": "corvallisor",
						"mountPath": "/etc/secrets",
						"readOnly": true
					}]
				}],
				"restartPolicy": "Always",
				"volumes": [{
					"name": "corvallisor",
					"secret": {
						"secretName": "corvallisor"
					}
				}]
			}
		}
	}
}
